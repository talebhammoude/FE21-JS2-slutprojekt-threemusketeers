{"mappings":"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","sources":["src/modules/signUpLogin.ts","src/modules/domSignLog.ts","src/html/katesidan.ts"],"sourcesContent":["import { initializeApp } from \"firebase/app\";\r\nimport { firebaseConfig } from \"./firebaseconfig\";\r\nimport { db } from \"./firebaseconfig\";\r\nimport { ref, update, get, child, getDatabase, remove } from \"firebase/database\";\r\nimport { DisplaySignLog } from \"./domSignLog\";\r\n\r\ninitializeApp(firebaseConfig);\r\nconst dbRef = ref(db, \"/userlist/\");\r\nconst display = new DisplaySignLog();\r\n\r\nexport class SignUpSignIn {\r\n  public username: HTMLInputElement;\r\n  public password: HTMLInputElement;\r\n  public bio: HTMLInputElement;\r\n\r\n  constructor(username?: HTMLInputElement, password?: HTMLInputElement) {\r\n    this.username = username;\r\n    this.password = password;\r\n  }\r\n  //logIn\r\n  public logIn(): void {\r\n    document.getElementById(\"loginBtn\").addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n\r\n      const dbRef = ref(getDatabase());\r\n      this.username = document.querySelector(\"#username\");\r\n      this.password = document.querySelector(\"#password\");\r\n      this.bio = document.querySelector(\"#bio\");\r\n      \r\n      get(child(dbRef, `userlist/${this.username.value}`)).then(\r\n        (snapshot) => {\r\n\r\n          if (this.username.value == \"\" || this.password.value == \"\") {\r\n            display.fillInputBox();\r\n            \r\n          } else if (this.password.value != snapshot.val().password) {\r\n            display.wrongPassword();\r\n          } else if (this.password.value == snapshot.val().password) {\r\n           \r\n            \r\n            localStorage.setItem('loginName', this.username.value);\r\n            location.href = \"./html/katesidan.html\"; \r\n          }\r\n        }\r\n      );\r\n    });\r\n  }\r\n  //create new user\r\n  public createNewUser(): void {\r\n    document.getElementById(\"createBtn\").addEventListener(\"click\", (e) => {\r\n      e.preventDefault;\r\n      \r\n      this.username = document.querySelector(\"#username\");\r\n      this.password = document.querySelector(\"#password\");\r\n      const bio: HTMLInputElement = document.querySelector(\"#bio\");\r\n      const theUsername: string = this.username.value.toLowerCase();\r\n\r\n      if (theUsername === \"\" || this.password.value === \"\" || bio.value === \"\") {\r\n        display.fillInputBox();\r\n      }\r\n      else {\r\n        const newUserInfo = {\r\n          username: (document.querySelector(\"#username\") as HTMLInputElement).value,\r\n          password: (document.querySelector(\"#password\") as HTMLInputElement).value,\r\n          bion: (document.querySelector(\"#bio\") as HTMLInputElement).value,\r\n        };\r\n        get(child(dbRef, `/${theUsername}`)).then((snapshot) => {\r\n          if (snapshot.exists()){\r\n            display.userExist();\r\n          } else {\r\n            if (theUsername != \"\" && this.password.value != \"\" && bio.value != \"\"){\r\n              const newUser = {};\r\n              const Key: string = theUsername;\r\n              newUser[Key] = newUserInfo;\r\n              update(dbRef, newUser);\r\n            }\r\n            location.href = \"./html/katesidan.html\"; \r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  // delete user\r\n  public deleteUserAccount(): void {\r\n    remove(ref(db, \"userlist/\" + localStorage.getItem(\"loginName\")))\r\n    .then(()=>{\r\n      location.href = \"./index.html\"; \r\n    })\r\n  }\r\n\r\n\r\n\r\n\r\n}","export class DisplaySignLog {\r\n\r\n  public loginPages(): void {\r\n\r\n    //create user\r\n    document.getElementById(\"create\").addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n\r\n      const formTitle: HTMLElement = document.getElementById(\"form-title\");\r\n      formTitle.innerText = \"Create account\";\r\n\r\n      const bioCon: HTMLElement = document.querySelector(\"#bio-container\");\r\n      bioCon.style.display = \"block\";\r\n\r\n      const loginBtn: HTMLElement = document.getElementById(\"loginBtn\");\r\n      loginBtn.style.display = \"none\";\r\n\r\n      const createBtn: HTMLElement = document.querySelector(\"#create-user\");\r\n      createBtn.style.display = \"block\";\r\n\r\n      const alreadyUser: HTMLElement = document.getElementById(\"create\");\r\n      alreadyUser.innerHTML = 'Already a user? <a id=\"login-page\" href=\"\">Login</a>';\r\n    \r\n\r\n      //back to login\r\n      document.getElementById(\"login-page\").addEventListener(\"click\", (e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n\r\n        const formTitle: HTMLElement = document.getElementById(\"form-title\");\r\n        formTitle.innerText = \"Log in\";\r\n\r\n        const bioCon: HTMLElement = document.querySelector(\"#bio-container\");\r\n        bioCon.style.display = \"none\";\r\n\r\n        const loginBtn: HTMLElement = document.querySelector(\"#loginBtn\");\r\n        loginBtn.style.display = \"revert\";\r\n\r\n        const createBtn: HTMLElement = document.querySelector(\"#create-user\");\r\n        createBtn.style.display = \"none\";\r\n\r\n        const alreadyUser: HTMLElement = document.getElementById(\"create\");\r\n        alreadyUser.innerHTML = 'Not a user yet? <a id=\"login-page\" href=\"\">Create account</a>';\r\n\r\n      });\r\n    });\r\n  }\r\n  //felmedelande\r\n  public fillInputBox(): void {\r\n    const inputBoxError: HTMLElement = document.getElementById(\"title-error\");\r\n    inputBoxError.innerText = \"[Don't forget to fill out every box]\";\r\n  }\r\n\r\n  public userExist(): void {\r\n    const userExists: HTMLElement = document.getElementById(\"title-error\");\r\n    userExists.innerText = \"[This username is taken]\";\r\n  }\r\n\r\n  public wrongPassword(): void {\r\n    const wrongPassword: HTMLElement = document.getElementById(\"title-error\");\r\n    wrongPassword.innerText = \"[Wrong password, try again]\";\r\n  }\r\n}","import { SignUpSignIn } from \"../modules/signUpLogin\";\r\n\r\nconst deleteAccountBtn = document.querySelector(\".delAccountBtn\") as HTMLButtonElement;\r\n\r\n\r\nconst users = new SignUpSignIn();\r\n\r\n\r\ndeleteAccountBtn.addEventListener(\"click\", (e)=> {\r\n    e.preventDefault();\r\n    users.deleteUserAccount();\r\n})"],"names":["$707ge","parcelRequire","initializeApp","$5tHFl","firebaseConfig","$ae39cb656566faeb$var$dbRef","$iLhJC","ref","db","$ae39cb656566faeb$var$display","loginPages","document","getElementById","addEventListener","e1","preventDefault","innerText","querySelector","style","display","innerHTML","e","stopPropagation","fillInputBox","userExist","wrongPassword","$b1d1dc5a861a14fc$var$deleteAccountBtn","$b1d1dc5a861a14fc$var$users","constructor","username","password","this","logIn","dbRef","getDatabase","bio","get","child","value","then","snapshot","val","localStorage","setItem","location","href","createNewUser","theUsername","toLowerCase","newUserInfo","bion","exists","newUser","update","deleteUserAccount","remove","getItem"],"version":3,"file":"katesidan.368eb469.js.map"}