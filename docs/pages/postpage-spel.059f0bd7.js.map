{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,gDCAAC,EAAAD,EAAA,mCAMA,MAAME,EAAMD,EAAAE,cAAcC,EAAAC,gBAIpBC,EAAKC,EAAAC,aAAaN,GAElBO,EAAWF,EAAAG,WAAWJ,EAAI,QAC1BK,EAAIJ,EAAAK,MAAMH,EAAUF,EAAAM,MAAM,WAAY,KAAM,GAAIN,EAAAO,QAAQ,SDH9D,MAAMC,EAAMd,EAAAE,cAAcC,EAAAC,gBAIpBW,EAAKT,EAAAC,aAAaO,GAGlBE,EAAYC,SAASC,cAAc,eAAeC,UAClDC,EAAWH,SAASC,cAAc,cAClCG,EAAUJ,SAASC,cAAc,cCHvCI,wBAEgChB,EAAAiB,QAAQb,IAEtBc,SAASC,IAEvBR,SAASC,cAAc,cAAcC,WAAa,yDAGzCM,EAAIC,OAAOC,iDAEIF,EAAIC,OAAOE,+BDLvCC,GAwBAR,EAAQS,iBAAiB,SAAUC,IAC/BA,EAAEC,iBAtBNV,iBACE,MAAMW,EAAU,IAAInC,EAAAoC,KAAKlB,EAAWI,EAASe,MAAO,EAAG,IAAIC,MAE3D,IACE,MAAMC,QAAe/B,EAAAgC,OAAOhC,EAAAG,WAAWM,EAAI,QAAS,CAClDY,KAAMM,EAAQM,SACdX,KAAMK,EAAQL,KACdY,SAAUP,EAAQO,SAClBC,KAAMR,EAAQQ,OAEhBC,QAAQC,IAAI,6BAA8BN,EAAOO,IACjD,MAAOb,GACPW,QAAQG,MAAM,0BAA2Bd,IAWzCe,GACA1B,EAASe,MAAQ","sources":["src/pages/postpage-spel.ts","src/modules/postlist-spel.ts"],"sourcesContent":["import {Post} from \"../modules/post\";\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { getFirestore, collection, addDoc } from \"firebase/firestore\";\r\nimport { firebaseConfig } from \"../modules/firebaseconfig\";\r\n\r\n\r\nimport { renderPostListSpel } from \"../modules/postlist-spel\";\r\n\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\n\r\n\r\n// Initialize Cloud Firestore and get a reference to the service\r\nconst db = getFirestore(app);\r\n\r\n\r\nconst userValue = document.querySelector(\".user-class\").innerHTML;\r\nconst postText = document.querySelector(\".post-text\") as HTMLDataElement\r\nconst postBtn = document.querySelector(\".post-btn\");\r\n\r\n\r\nrenderPostListSpel();\r\n\r\n\r\nasync function writeToDb() {\r\n  const postObj = new Post(userValue, postText.value, 3, new Date());\r\n\r\n  try {\r\n    const docRef = await addDoc(collection(db, \"post\"), {\r\n      user: postObj.username,\r\n      text: postObj.text,\r\n      category: postObj.category,\r\n      time: postObj.time\r\n    });\r\n    console.log(\"Document written with ID: \", docRef.id);\r\n  } catch (e) {\r\n    console.error(\"Error adding document: \", e);\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\npostBtn.addEventListener(\"click\", (e)=>{\r\n    e.preventDefault();\r\n    writeToDb();\r\n    postText.value = \"\";\r\n})\r\n\r\n\r\n","import { initializeApp } from \"firebase/app\";\r\nimport { getFirestore, collection, getDocs, query, orderBy, where } from \"firebase/firestore\";\r\nimport { firebaseConfig } from \"./firebaseconfig\";\r\n\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\n\r\n\r\n// Initialize Cloud Firestore and get a reference to the service\r\nconst db = getFirestore(app);\r\n\r\nconst postsRef = collection(db, \"post\");\r\nconst q = query(postsRef, where(\"category\", \"==\", 3) ,orderBy(\"time\"));\r\n\r\n\r\nasync function renderPostListSpel() {\r\n\r\n    const querySnapshot = await getDocs(q);\r\n\r\n    querySnapshot.forEach((doc) => {\r\n    \r\n    document.querySelector(\".post-list\").innerHTML += `\r\n    <div class=\"the-post\">\r\n       <h2>\r\n           ${doc.data().user}\r\n       </h2>\r\n       <p class=\"theText\">${doc.data().text}</p>\r\n    </div>\r\n   `\r\n});\r\n\r\n\r\n}\r\n\r\n\r\nexport {renderPostListSpel};"],"names":["$2sKvt","parcelRequire","$707ge","$e045f600df19d305$var$app","initializeApp","$5tHFl","firebaseConfig","$e045f600df19d305$var$db","$hgQql","getFirestore","$e045f600df19d305$var$postsRef","collection","$e045f600df19d305$var$q","query","where","orderBy","$d8fe97f86d64551b$var$app","$d8fe97f86d64551b$var$db","$d8fe97f86d64551b$var$userValue","document","querySelector","innerHTML","$d8fe97f86d64551b$var$postText","$d8fe97f86d64551b$var$postBtn","async","getDocs","forEach","doc","data","user","text","$e045f600df19d305$export$c02894ec92633a7d","addEventListener","e","preventDefault","postObj","Post","value","Date","docRef","addDoc","username","category","time","console","log","id","error","$d8fe97f86d64551b$var$writeToDb"],"version":3,"file":"postpage-spel.059f0bd7.js.map"}